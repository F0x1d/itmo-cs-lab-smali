# Статья 6: Get started в Smali

Здесь мы рассмотрим самые частые способы изменения поведения приложений в `Smali`

Представим, что у нас есть приложение, в котором есть премиум версия, которую можно получить лишь по приглашению

## Подмена результата

Как-то же самому приложению надо понять текущую версию, правильно? 
Часто вы можете использовать поиск по `premium` и найти какой-нибудь такой метод:
```smali
.method public isPremiumUser()Z
    .locals 1

    invoke-static {}, Lcom/example/Something;->checkPremium()Z

    move-result v0

    return v0
.end method
```

Какой же самый легкий способ обмануть приложение? Просто поменять значение регистра перед `return` метода:
```smali
.method public isPremiumUser()Z
    .locals 1

    invoke-static {}, Lcom/example/Something;->checkPremium()Z

    move-result v0

    # вот тут
    const v0, 1 # true

    return v0
.end method
```

Теперь метод всегда возвращает `true`, а мы получили статус премиум пользователя!

**NB**: похожий подход можно использовать для решения лабораторной, только подменять не перед `return` и не `boolean`

## Переворот if

Но не всегда такое подойдет. Иногда банально проще перевернуть ветвление, рассмотрим:

```smali
invoke-static {}, Lcom/example/Something;->checkPremium()Z

move-result v0

if-eqz v0, :cond_1

# тут код для премиум пользователей

:cond_1
```

Если же мы поменяем `if-eqz` на `if-nez`, то тогда код будет выполняться лишь для **не** премиум пользователей, что нас устраивает. 
В этом случае можно было и подменить возвращаемое значение, но часто `if` бывают не просто `-eqz`, `-nez`, в таком случае уже проще просто перевернуть

**NB**: похожий подход можно использовать для решения лабораторной, осталось лишь найти такой `if`

# Навигация

- [Задание](../README.md)
- [Статья 1: Android, приложения](./APPS.md)
- [Статья 2: ApkTool](./APKTOOL.md)
- [Статья 3: JADX](./JADX.md)
- [Статья 4: Структура Smali](./SMALI-STRUCTURE.md)
- [Статья 5: Переменные и методы в Smali](./SMALI-VARS-METHODS.md)
- **Статья 6: Get started в Smali**